{% extends 'core/base.html' %}

{% block title %}Become vendor | {% endblock %}

{% block content %}
    <h1 class="title">Become vendor</h1>

    <form method="post" action=".">
        {% csrf_token %}

        {{ form.as_p}}

        <div class="field">
            <div class="control">
                <button class="button is-dark is-uppercase">Sign up</button>
            </div>
        </div>
    </form>

    <hr>

    <h2 class="subtitle">Already have an account?</h2>

    <a href="{% url 'login' %}">Log in</a>



<!-- vendor_admin.html -->

<script>
    // Function to handle the response from the server
    function handleVendorAdminResponse(response) {
        if (response.error) {
            // If there is an error, show a pop-up message
            alert(response.error);
            // Redirect the user to the frontpage or any other appropriate URL
            window.location.replace("{% url 'frontpage' %}");
        }
    }

    // Fetch the vendor admin data
    fetch("{% url 'vendor_admin' %}")
        .then(response => response.json())
        .then(handleVendorAdminResponse)
        .catch(error => console.error('Error:', error));
</script>
{% endblock %}
